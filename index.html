<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0 " />
    <title>Threejs practice</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <button id="btn">start animation</button>
    <script src="/js/three.js"></script>
    <script src="/js//OrbitControls.js"></script>
    <script>
      (function () {
        var script = document.createElement("script");
        script.onload = function () {
          var stats = new Stats();
          document.body.appendChild(stats.dom);
          requestAnimationFrame(function loop() {
            stats.update();
            requestAnimationFrame(loop);
          });
        };
        script.src = "//mrdoob.github.io/stats.js/build/stats.min.js";
        document.head.appendChild(script);
      })();

      var scene = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );

      var renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      //responsive on viewport change
      addEventListener("resize", () => {
        var width = window.innerWidth;
        var height = window.innerHeight;
        renderer.setSize(width, height);
        camera.aspect = width / height;
        camera.updateProjectionMatrix();
      });

      // fog = new Fog({ color: 3, near: 0.1, far: 5 });

      //orbit control
      controls = new THREE.OrbitControls(camera, renderer.domElement);

      //create shape
      var geometry = new THREE.BoxGeometry(2, 2, 2);
      var material = new THREE.MeshBasicMaterial({ color: 0xffffff });
      var cube = new THREE.Mesh(geometry, material);
      scene.add(cube);

      var light = new THREE.AmbientLight(0x6d7d71, 5);
      scene.add(light);
      cube.position.z = -5;
      cube.position.y = 2;
      camera.position.z = 15;
      camera.position.y = 3;

      //create floor shape
      var watergeometry = new THREE.BoxGeometry(200, 0.2, 200);
      var watermaterial = new THREE.MeshLambertMaterial({
        map: new THREE.TextureLoader().load("/Images/waterbg.jpg"),
        side: THREE.DoubleSide,
      });
      var floor = new THREE.Mesh(watergeometry, watermaterial);
      scene.add(floor);

      floor.position.y = 1;

      //update
      var update = function () {
        // cube.position.z += 0.09;
        // camera.rotation.y += 0.01;
      };

      var render = function () {
        renderer.render(scene, camera);
      };

      var testanime = () => {
        requestAnimationFrame(testanime);
        camera.rotation.y += 0.01;
      };

      var Gameloop = function () {
        requestAnimationFrame(Gameloop);
        update();
        render();
      };

      Gameloop();

      //button animation
      document.getElementById("btn").addEventListener("click", function () {
        document.getElementById("btn").innerHTML = "Hello World";
        testanime();
        console.log("faggot");
      });
    </script>
  </body>
</html>
